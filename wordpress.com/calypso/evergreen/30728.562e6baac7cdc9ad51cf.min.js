var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[30728],{"../packages/components/src/icons/alert.tsx":(e,t,s)=>{s.d(t,{A:()=>r});var o=s("../node_modules/@wordpress/primitives/build-module/svg/index.js"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let r=(0,i.FD)(o.t4,{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.Y)(o.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0002 3.08864L2.54944 16.5H17.4509L10.0002 3.08864ZM10.8743 1.57344C10.4933 0.887629 9.50701 0.88763 9.12601 1.57344L0.825523 16.5143C0.455228 17.1808 0.937196 18 1.69968 18H18.3007C19.0631 18 19.5451 17.1808 19.1748 16.5143L10.8743 1.57344Z"}),(0,i.Y)(o.wA,{d:"M11 7H9V12H11V7Z"}),(0,i.Y)(o.wA,{d:"M11 13H9V15H11V13Z"})]})},"../packages/onboarding/src/step-container-v2/components/Heading/Heading.tsx":(e,t,s)=>{s.d(t,{D:()=>r});var o=s("../node_modules/clsx/dist/clsx.mjs"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let r=({text:e,subText:t,align:s,size:r})=>(0,i.FD)("div",{className:(0,o.A)("step-container-v2__heading",{left:"left"===s,center:"center"===s}),children:[(0,i.Y)("h1",{className:(0,o.A)("wp-brand-font",{small:"small"===r}),children:e}),t&&(0,i.Y)("p",{children:t})]})},"../packages/onboarding/src/step-container-v2/components/StepContainerV2/StepContainerV2.tsx":(e,t,s)=>{s.d(t,{g:()=>a});var o=s("../node_modules/@wordpress/compose/build-module/hooks/use-viewport-match/index.js"),i=s("../node_modules/react/index.js"),r=s("../packages/onboarding/src/step-container-v2/components/StepContainerV2/context.ts"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let a=({children:e})=>{let t=(0,o.A)("small",">="),s=(0,o.A)("large",">="),[a,c]=(0,i.useState)(0),[l,p]=(0,i.useState)(0),d=(0,i.useMemo)(()=>({isSmallViewport:t,isLargeViewport:s,topBarHeight:a,setTopBarHeight:c,stickyBottomBarHeight:l,setStickyBottomBarHeight:p}),[t,s,a,c,l,p]),u="function"==typeof e?e(d):e;return(0,n.Y)(r.H.Provider,{value:d,children:(0,n.Y)("div",{className:"step-container-v2",style:{"--step-container-v2-top-bar-height":`${a}px`,"--step-container-v2-sticky-bottom-bar-height":`${l}px`},children:u})})}},"../packages/onboarding/src/step-container-v2/components/StepContainerV2/context.ts":(e,t,s)=>{s.d(t,{H:()=>o});let o=(0,s("../node_modules/react/index.js").createContext)({isSmallViewport:!1,isLargeViewport:!1,topBarHeight:0,setTopBarHeight:()=>{},stickyBottomBarHeight:0,setStickyBottomBarHeight:()=>{}})},"../packages/onboarding/src/step-container-v2/components/TopBar/TopBar.tsx":(e,t,s)=>{s.d(t,{V:()=>a});var o=s("../packages/components/src/wordpress-wordmark/index.tsx"),i=s("../packages/components/src/logos/wordpress-logo/index.tsx"),r=s("../node_modules/clsx/dist/clsx.mjs"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let a=({leftElement:e,rightElement:t,logo:s,compactLogo:a})=>{let c=(0,n.FD)("div",{className:(0,r.A)("step-container-v2__top-bar-wordpress-logo-wrapper",{"is-compact":a}),children:[!a&&(0,n.Y)(o.A,{className:"step-container-v2__top-bar-wordpress-logo step-container-v2__top-bar-wordpress-logo--wordmark",color:"currentColor"}),(0,n.Y)(i.B,{size:21,className:"step-container-v2__top-bar-wordpress-logo step-container-v2__top-bar-wordpress-logo--logo"})]});return(0,n.FD)("div",{className:"step-container-v2__top-bar",children:[s||c,e&&(0,n.FD)(n.FK,{children:[(0,n.Y)("div",{className:"step-container-v2__top-bar-divider"}),(0,n.Y)("div",{className:"step-container-v2__top-bar-left-element",children:e})]}),t&&(0,n.Y)("div",{className:"step-container-v2__top-bar-right-element",children:t})]})}},"../packages/onboarding/src/step-container-v2/wireframes/Loading/Loading.tsx":(e,t,s)=>{s.d(t,{R:()=>l});var o=s("../node_modules/@wordpress/components/build-module/progress-bar/index.js"),i=s("../node_modules/react/index.js"),r=s("../packages/onboarding/src/step-container-v2/components/Heading/Heading.tsx"),n=s("../packages/onboarding/src/step-container-v2/components/StepContainerV2/StepContainerV2.tsx"),a=s("../packages/onboarding/src/step-container-v2/components/TopBar/TopBar.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let l=({title:e,progress:t,delay:s=0,compactLogo:l})=>{let[p,d]=(0,i.useState)(0===s),[u,m]=(0,i.useState)(s);return s!==u&&(m(s),d(0===s)),(0,i.useEffect)(()=>{if(0===s)return;let e=setTimeout(()=>{d(!0)},s);return()=>clearTimeout(e)},[s]),(0,c.FD)(n.g,{children:[(0,c.Y)(a.V,{compactLogo:l}),(0,c.FD)("div",{className:"step-container-v2--loading",children:[e&&p&&(0,c.Y)("div",{className:"step-container-v2--loading__heading-wrapper",children:(0,c.Y)("div",{className:"step-container-v2--loading__heading",children:(0,c.Y)(r.D,{text:e,size:"small",align:"center"})})}),(0,c.Y)(o.A,{className:"step-container-v2--loading__progress-bar",value:t})]})]})}},"./blocks/app-promo/index.tsx":(e,t,s)=>{s.d(t,{A:()=>m});var o=s("../packages/components/src/card/index.tsx"),i=s("../packages/components/src/button/index.tsx"),r=s("../node_modules/clsx/dist/clsx.mjs"),n=s("../packages/i18n-calypso/src/rtl.js"),a=s("../packages/i18n-calypso/src/use-translate.js"),c=s("./blocks/app-promo/qr-code.tsx"),l=s("./blocks/get-apps/apps-badge.tsx"),p=s("./components/card-heading/index.jsx"),d=s("./lib/user-agent/index.js"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let m=({title:e="",iconSize:t=29,campaign:s="calypso-app-promo",subheader:m="",className:h="",hasQRCode:g=!1,hasGetAppButton:_=!0})=>{let w=(0,n.I)(),k=(0,a.A)(),A=Math.ceil(49/29*t),{isiPad:y,isiPod:f,isiPhone:b,isAndroid:v}=d.A,L=y||f||b,j=L||v;return(0,u.FD)(o.A,{className:(0,r.A)("app-promo",h),children:[(0,u.Y)("img",{className:"app-promo__icon",src:w?"/calypso/images/../images/wp-to-jp-rtl-ffac38b6f77025a73fbe.svg":"/calypso/images/../images/wp-to-jp-25f031bc44b95dbc6729.svg",width:A,height:t,alt:"WordPress and Jetpack app"}),(0,u.FD)("div",{className:"app-promo__title",children:[(0,u.Y)(p.A,{tagName:"h2",children:e||k("Get our mobile app")}),!j&&(0,u.Y)("h3",{className:"app-promo__subheader",children:m})]}),j&&(0,u.FD)("div",{className:"app-promo__app-badges",children:[m&&(0,u.Y)("p",{className:"app-promo__app-badges-text",children:m}),(0,u.Y)(l.A,{storeName:L?"ios":"android",utm_campaign:s,utm_source:"calypso"})]}),g&&!j&&(0,u.Y)(c.A,{campaign:s,size:100}),_&&!j&&(0,u.Y)(i.$,{className:"app-promo__link-button is-link",href:`/me/get-apps/?campaign=${encodeURIComponent(s)}`,children:k("Get the Jetpack app")})]})}},"./blocks/app-promo/qr-code.tsx":(e,t,s)=>{s.d(t,{A:()=>c});var o=s("../packages/i18n-utils/src/localize-url.tsx"),i=s("../packages/i18n-calypso/src/use-translate.js"),r=s("./components/async-load/index.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),a=()=>s.e(98871).then(s.bind(s,"../node_modules/qrcode.react/lib/esm/index.js"));let c=({campaign:e="calypso-app-promo",size:t=150})=>{let s=(0,i.A)(),c=(0,o._Y)();return(0,n.FD)("div",{className:"app-promo__qr-code",children:[(0,n.Y)("div",{className:"app-promo__qr-code-canvas",children:(0,n.Y)(r.A,{require:a,placeholder:(0,n.Y)("div",{className:"app-promo__qr-code-placeholder",style:{width:`${t}px`,height:`${t}px`}}),value:c(`https://web.archive.org/web/20250820114040/https://apps.wordpress.com/get?campaign=${e}-qrcode`),size:t})}),(0,n.Y)("p",{className:"get-apps__card-text",children:s("Visit {{a}}wp.com/app{{/a}} from your mobile device, or scan the code to download the Jetpack mobile app.",{components:{a:(0,n.Y)("a",{className:"get-apps__jetpack-branded-link",href:c(`https://web.archive.org/web/20250820114040/https://apps.wordpress.com/get?campaign=${encodeURIComponent(e)}-shortlink`)})}})})]})}},"./blocks/get-apps/apps-badge.tsx":(e,t,s)=>{s.d(t,{A:()=>h});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/clsx/dist/clsx.mjs"),r=s("../packages/i18n-calypso/src/index.ts"),n=s("../node_modules/lodash-es/startsWith.js"),a=s("../node_modules/react/index.js"),c=s("../node_modules/react-redux/dist/react-redux.mjs"),l=s("./lib/i18n-utils/browser.js"),p=s("./state/analytics/actions/record.js"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let u={ios:{defaultSrc:"/calypso/images/me/get-apps-ios-store.svg",src:"https://web.archive.org/web/20250820114040/https://linkmaker.itunes.apple.com/assets/shared/badges/{localeSlug}/appstore-lrg.svg",tracksEvent:"calypso_app_download_ios_click",getStoreLink:e=>`https://web.archive.org/web/20250820114040/https://apps.apple.com/app/apple-store/id1565481562?pt=299112&ct=${e}&mt=8`,getTitleText:()=>(0,r.Tl)("Download the Jetpack iOS mobile app."),getAltText:()=>(0,r.Tl)("Apple App Store download badge"),getLocaleSlug:function(){let e=(0,l.y)().split("-")[0];return"en"===e?"en-us":`${e}-${e}`}},android:{defaultSrc:"/calypso/images/me/get-apps-google-play.png",src:"https://web.archive.org/web/20250820114040/https://play.google.com/intl/en_us/badges/images/generic/{localeSlug}_badge_web_generic.png",tracksEvent:"calypso_app_download_android_click",getStoreLink:(e,t="calypso",s="web")=>`https://web.archive.org/web/20250820114040/https://play.google.com/store/apps/details?id=com.jetpack.android&referrer=utm_source%3D%${t}%26utm_medium%3D${s}%26utm_campaign%3D${e}`,getTitleText:()=>(0,r.Tl)("Download the Jetpack Android mobile app."),getAltText:()=>(0,r.Tl)("Google Play Store download badge"),getLocaleSlug:l.y}};class m extends a.PureComponent{constructor(e){super(e),(0,o.A)(this,"image",null),(0,o.A)(this,"onLoadImageComplete",()=>{this.setState({hasExternalImageLoaded:!0})}),(0,o.A)(this,"onLoadImageError",()=>{this.setState({hasExternalImageLoaded:!1,imageSrc:u[this.props.storeName].defaultSrc})}),(0,o.A)(this,"onLinkClick",()=>{let{storeName:e,utm_source:t}=this.props;this.props.recordTracksEvent(u[e].tracksEvent,{utm_source_string:t})});let t=u[e.storeName].getLocaleSlug().toLowerCase(),s=!(0,n.A)(t,"en");this.state={imageSrc:s?u[e.storeName].src.replace("{localeSlug}",t):u[e.storeName].defaultSrc},s&&(this.image=null,this.loadImage())}loadImage(){this.image=new globalThis.Image,this.image.src=this.state.imageSrc,this.image.onload=this.onLoadImageComplete,this.image.onerror=this.onLoadImageError}render(){let{altText:e,titleText:t,storeLink:s,storeName:o,utm_source:r,utm_medium:n,utm_campaign:a}=this.props,{imageSrc:c,hasExternalImageLoaded:l}=this.state,p=(0,i.A)("get-apps__app-badge",{[`${o}-app-badge`]:!0,"is-external-image":l}),m=u[o];return(0,d.Y)("figure",{className:p,children:(0,d.Y)("a",{href:s||m.getStoreLink(a,r,n),onClick:this.onLinkClick,target:"_blank",rel:"noopener noreferrer",children:(0,d.Y)("img",{src:c,title:t||m.getTitleText(),alt:e||m.getAltText()})})})}}(0,o.A)(m,"defaultProps",{altText:"",storeLink:null,titleText:""});let h=(0,c.Ng)(null,{recordTracksEvent:p.Oy})(m)},"./blocks/jetpack-connect-site-only/index.js":(e,t,s)=>{s.d(t,{A:()=>p});var o=s("../packages/i18n-calypso/src/localize.js"),i=s("../node_modules/react/index.js"),r=s("./lib/analytics/tracks.js"),n=s("./lib/url/add-query-args.ts"),a=s("./lib/url/http-utils.ts"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class l extends i.Component{getPlansURL(){let{homeUrl:e,redirectAfterAuth:t}=this.props,s=(0,a.q_)(e),o=new URLSearchParams(window.location.search),i=o.get("calypso_env"),r=new URLSearchParams(o.get("redirect_to")).get("purchase_nonce"),c="development"===i?`https://web.archive.org/web/20250820114040/http://jetpack.cloud.localhost:3001/pricing/${s}`:`https://web.archive.org/web/20250820114040/https://cloud.jetpack.com/pricing/${s}`;return(0,n.A)({redirect:t,site:s,unlinked:"1",purchaseNonce:r},c)}getTracksProps(){let{source:e}=this.props;return{source:e}}onSkip(){(0,r.recordTracksEvent)("calypso_jpc_iframe_skip_user_connection",this.getTracksProps())}onFeatures(){(0,r.recordTracksEvent)("calypso_jpc_iframe_view_all_features",this.getTracksProps())}render(){let{translate:e}=this.props;return(0,c.FD)("div",{className:"jetpack-connect-site-only__form",children:[(0,c.Y)("h2",{children:e("Or start using Jetpack now")}),(0,c.Y)("p",{children:e("Jump in and start using Jetpack right away.")}),(0,c.Y)("p",{children:e("{{link}}Some features{{/link}} will not be available, but you'll be able to connect your user account at any point to unlock them.",{components:{link:(0,c.Y)("a",{target:"_blank",href:"https://web.archive.org/web/20250820114040/https://jetpack.com/support/why-the-wordpress-com-connection-is-important-for-jetpack/",rel:"noreferrer",onClick:()=>this.onFeatures()})}})}),(0,c.Y)("a",{className:"jetpack-connect-site-only__continue-link",href:this.getPlansURL(),onClick:()=>this.onSkip(),children:e("Continue without user account")})]})}}let p=(0,o.A)(l)},"./blocks/login/index.jsx":(e,t,s)=>{s.d(t,{A:()=>eJ});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../packages/calypso-router/src/index.js"),r=s("../node_modules/clsx/dist/clsx.mjs"),n=s("../node_modules/email-validator/index.js"),a=s("../packages/i18n-calypso/src/localize.js"),c=s("../node_modules/lodash-es/isEmpty.js"),l=s("../node_modules/lodash-es/get.js"),p=s("../node_modules/react/index.js"),d=s("../node_modules/react-redux/dist/react-redux.mjs"),u=s("./components/async-load/index.tsx"),m=s("./components/notice/index.tsx"),h=s("./lib/akismet/is-akismet-redirect.ts"),g=s("./lib/get-gravatar-oauth2-flow.js"),_=s("./lib/login/index.js"),w=s("./lib/oauth2-clients.js"),k=s("./lib/paths/index.js"),A=s("./lib/webauthn/index.js"),y=s("../packages/i18n-calypso/src/use-translate.js"),f=s("./blocks/visit-site/index.jsx"),b=s("./components/gravatar-login-logo/index.tsx"),v=s("./login/wp-login/hooks/get-header-text.tsx"),L=s("./state/oauth2-clients/ui/selectors.js"),j=s("./state/selectors/get-current-query-arguments.js"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let S=({action:e,fromSite:t,isGravPoweredLoginPage:s,isManualRenewalImmediateLoginAttempt:o,linkingSocialService:i,socialConnect:r,twoStepNonce:n,twoFactorAuthType:a})=>{let c=(0,y.A)(),l=(0,d.d4)(L.AL),p=(0,d.d4)(j.A),u=(0,v.n)({twoFactorAuthType:a,isManualRenewalImmediateLoginAttempt:o,socialConnect:r,linkingSocialService:i,action:e,oauth2Client:l,currentQuery:p,translate:c,twoStepNonce:n,isGravPoweredClient:!0}),m=null;if(s){let e=(0,w.Dr)(l)&&p?.gravatar_from==="3rd-party",t=(0,w.Dr)(l)&&p?.gravatar_from==="quick-editor",s=!!((0,w.r7)(l)&&p?.email_address);m=(0,x.Y)("p",{className:"login__header-subtitle",children:c(e||t||s?"Please log in with your email and password.":"If you prefer logging in with a password, or a social media account, choose below:")})}else t&&(m=(0,x.Y)(f.A,{siteSlug:t}));return(0,x.FD)("div",{className:"grav-powered-login__form-header-wrapper",children:[(0,x.Y)(b.A,{iconUrl:l?.icon,alt:l?.title||"",isCoBrand:(0,w.r7)(l)&&!(0,w.yN)(l)}),(0,x.Y)("div",{className:"grav-powered-login__form-header",children:u}),m]})};var C=s("./state/auth/actions.js"),E=s("./state/current-user/actions.js"),T=s("./state/current-user/selectors.js"),F=s("./state/immediate-login/selectors.js"),P=s("./state/login/actions/reboot-after-login.ts"),Y=s("./state/login/magic-login/actions.js"),N=s("./state/login/selectors.js"),U=s("./state/login/utils.js"),R=s("./state/logout/actions.js"),D=s("./state/notices/actions.ts"),O=s("./state/selectors/get-current-route.js"),q=s("./state/selectors/get-initial-query-arguments.js"),M=s("./state/selectors/get-is-wccom.ts"),W=s("./state/selectors/get-is-woo.ts"),J=s("./state/selectors/get-partner-slug-from-query.js"),I=s("./state/selectors/get-wccom-from.ts"),V=s("./state/selectors/is-fetching-magic-login-email.js"),K=s("./state/selectors/is-magic-login-email-requested.js"),$=s("./state/selectors/is-woo-jpc-flow.ts"),B=s("./blocks/login/continue-as-user.jsx"),z=s("../packages/calypso-config/src/index.ts"),H=s("../packages/calypso-url/src/url-parts.ts"),Q=s("./state/analytics/actions/record.js");class G extends p.Component{componentDidUpdate(e){let t=t=>this.props[t]!==e[t];(t("createAccountError")||t("requestAccountError")||t("requestError")||t("twoFactorAuthRequestError"))&&window.scrollTo(0,0)}getCreateAccountError(){let{createAccountError:e}=this.props;return e&&"unknown_user"!==e.code?e:null}getError(){let{requestAccountError:e,requestError:t,twoFactorAuthRequestError:s}=this.props;return t||s||e||this.getCreateAccountError()}getSignupUrl(){let{currentQuery:e,currentRoute:t,oauth2Client:s,locale:o}=this.props,{pathname:i}=(0,H.O)(window.location.href);return(0,_.c5)(e,t,s,o,i)}render(){let e=this.getError();if(!e||e.field&&"global"!==e.field||!e.message||"user_exists"===e.code)return null;let t=e.message,s=this.getSignupUrl();return"unknown_user"===e.code&&s&&(t=this.props.translate("Hmm, we can't find a WordPress.com account for that social login. Please double check your information and try again. Alternatively, you can {{a}}sign up for a new account{{/a}}.",{components:{a:(0,x.Y)("a",{href:s,onClick:()=>{this.props.recordTracksEvent("calypso_login_social_unknown_user_signup_link_click")}})}})),"deleted_user"===e.code&&(t=this.props.translate("This account has been closed. If you believe your account was closed in error, please {{a}}contact us{{/a}}.",{components:{a:(0,x.Y)("a",{href:(0,z.Ay)("login_url")+"?action=recovery",target:"_blank",rel:"noopener noreferrer"})}})),(0,x.Y)(m.A,{status:"is-error",showDismiss:!1,children:t})}}let Z=(0,d.Ng)(e=>({createAccountError:(0,N.f)(e),requestAccountError:(0,N.QD)(e),requestError:(0,N.CD)(e),twoFactorAuthRequestError:(0,N.H4)(e),currentQuery:(0,j.A)(e),currentRoute:(0,O.A)(e),oauth2Client:(0,L.AL)(e)}),{recordTracksEvent:Q.Oy})((0,a.A)(G));var X=s("../packages/components/src/gridicon/index.tsx"),ee=s("../packages/components/src/card/index.tsx"),et=s("../packages/components/src/forms/form-label/index.tsx"),es=s("../packages/components/src/forms/form-input-validation/index.tsx"),eo=s("../packages/components/src/icons/alert.tsx"),ei=s("../packages/i18n-utils/src/localize-url.tsx"),er=s("../packages/onboarding/src/utils/domain-suggester.ts"),en=s("../node_modules/@wordpress/components/build-module/button/index.js"),ea=s("../node_modules/@wordpress/icons/build-module/icon/index.js"),ec=s("../node_modules/cookie/index.js"),el=s("../node_modules/lodash-es/debounce.js"),ep=s("../node_modules/lodash-es/includes.js"),ed=s("../node_modules/lodash-es/defer.js"),eu=s("../node_modules/lodash-es/capitalize.js"),em=s("../node_modules/react-dom/index.js"),eh=s("./blocks/authentication/index.tsx"),eg=s("./blocks/jetpack-connect-site-only/index.js"),e_=s("../node_modules/@wordpress/components/build-module/spinner/index.js");let ew=({isWoo:e,isSendingEmail:t,isDisabled:s,buttonText:o})=>(0,x.Y)(en.Ay,{variant:"primary",isBusy:!e&&t,disabled:s,type:"submit",__next40pxDefaultSize:!0,children:e&&t?(0,x.Y)(e_.Ay,{}):o});var ek=s("./components/forms/form-password-input/index.jsx"),eA=s("./components/forms/form-text-input/index.jsx"),ey=s("./components/social-buttons/index.ts"),ef=s("./lib/url/add-query-args.ts"),eb=s("./state/analytics/actions/record-with-client-id.js"),ev=s("./state/login/actions/form-update.js"),eL=s("./state/login/actions/auth-account-type.js"),ej=s("../packages/calypso-analytics/src/index.ts"),ex=s("./lib/tos-acceptance-tracking/index.js"),eS=s("./state/action-types.ts"),eC=s("./state/login/actions/remote-login-user.js");s("./state/login/init.js");var eE=s("./state/login/actions/create-social-user-failed.js"),eT=s("./state/login/actions/login-social-user.js"),eF=s("./state/selectors/get-is-blaze-pro.ts"),eP=s("./blocks/login/one-tap-auth-loader-overlay.tsx");class eY extends p.Component{constructor(...e){super(...e),(0,o.A)(this,"socialLoginButtons",[{service:"google",button:(0,x.Y)(ey.hU,{responseHandler:this.props.handleLogin,onClick:this.props.trackLoginAndRememberRedirect,isLogin:!0},1)},{service:"apple",button:(0,x.Y)(ey.KA,{responseHandler:this.props.handleLogin,onClick:this.props.trackLoginAndRememberRedirect,socialServiceResponse:this.props.socialServiceResponse,isLogin:!0},2)},{service:"github",button:(0,x.Y)(ey.T3,{responseHandler:this.props.handleLogin,onClick:this.props.trackLoginAndRememberRedirect,socialServiceResponse:this.props.socialServiceResponse,isLogin:!0},3)},{service:"magic-login",button:this.props.isSocialFirst&&this.props.magicLoginLink&&(0,x.Y)(ey.XT,{loginUrl:this.props.magicLoginLink,isJetpack:this.props.isJetpack},4)},{service:"qr-code",button:this.props.isSocialFirst&&this.props.qrLoginLink&&(0,x.Y)(ey.mk,{loginUrl:this.props.qrLoginLink},5)}])}render(){let{isSocialFirst:e,lastUsedAuthenticationMethod:t}=this.props;return(0,x.Y)(ee.A,{className:(0,r.A)("auth-form__social","is-login",{"is-social-first":e}),children:(0,x.Y)("div",{className:"auth-form__social-buttons",children:(0,x.Y)("div",{className:"auth-form__social-buttons-container",children:this.socialLoginButtons.map(({service:s,button:o},i)=>e&&s===t?(0,x.Y)(ey.mm,{onClick:this.props.resetLastUsedAuthenticationMethod},i+1):o)})})})}}var eN=s("../node_modules/@wordpress/url/build-module/get-query-arg.js"),eU=s("./blocks/login/utils/should-use-magic-code.ts");class eR extends p.Component{constructor(...e){super(...e),(0,o.A)(this,"state",{isFormDisabledWhileLoading:!0,usernameOrEmail:this.props.socialAccountLinkEmail||this.props.userEmail||"",emailSuggestion:"",emailSuggestionError:!1,password:"",lastUsedAuthenticationMethod:this.getLastUsedAuthenticationMethod()}),(0,o.A)(this,"debouncedEmailSuggestion",(0,el.default)(e=>{if(n.validate(e)){let{newEmail:t,wasCorrected:s}=(0,er.j)(e);if(s){this.props.recordTracksEvent("calypso_login_email_suggestion_generated",{original_email:JSON.stringify(e),suggested_email:JSON.stringify(t)}),this.setState({emailSuggestionError:!0,emailSuggestion:t});return}}},500)),(0,o.A)(this,"onChangeUsernameOrEmailField",e=>{this.setState({emailSuggestionError:!1,emailSuggestion:""}),this.onChangeField(e),this.debouncedEmailSuggestion(e.target.value)}),(0,o.A)(this,"onChangeField",e=>{this.props.formUpdate(),this.setState({[e.target.name]:e.target.value})}),(0,o.A)(this,"resetView",e=>{e.preventDefault(),this.props.recordTracksEvent("calypso_login_block_login_form_change_username_or_email"),this.props.resetAuthAccountType()}),(0,o.A)(this,"onSubmitForm",e=>{if(e.preventDefault(),!this.props.hasAccountTypeLoaded){let e=em.findDOMNode(this.usernameOrEmail).value;return(this.props.getAuthAccountType(e),this.setState({usernameOrEmail:e}),this.props.isJetpack&&(0,ep.A)(e,"@")&&(0,U.ec)(this.props.accountType))?void this.jetpackCreateAccountWithMagicLink():void 0}(0,U.ec)(this.props.accountType)&&this.props.sendMagicLoginLink?.(),this.loginUser()}),(0,o.A)(this,"savePasswordRef",e=>{this.password=e}),(0,o.A)(this,"saveUsernameOrEmailRef",e=>{this.usernameOrEmail=e}),(0,o.A)(this,"onWooCommerceSocialSuccess",(...e)=>{this.recordWooCommerceLoginTracks("social"),this.props.onSuccess(e)}),(0,o.A)(this,"handleWooCommerceSubmit",e=>{if(e.preventDefault(),document.activeElement.blur(),!this.props.hasAccountTypeLoaded)return void this.props.getAuthAccountType(this.state.usernameOrEmail);this.recordWooCommerceLoginTracks("email"),this.loginUser()}),(0,o.A)(this,"getLoginButtonText",()=>{let{translate:e,isWoo:t,loginButtonText:s,isJetpack:o}=this.props;return s?s:this.isUsernameOrEmailView()?e(o&&!t?"Continue with email":"Continue"):e("Log In")}),(0,o.A)(this,"showJetpackConnectSiteOnly",()=>!1),(0,o.A)(this,"recordSignUpLinkClick",()=>{this.props.recordTracksEvent("calypso_login_sign_up_link_click",{origin:"login-form"})}),(0,o.A)(this,"handleMagicLoginClick",e=>{this.props.recordTracksEvent("calypso_login_magic_login_request_click",{origin:e}),this.props.resetMagicLoginRequestForm()}),(0,o.A)(this,"handleSocialLogin",e=>{let t=this.props.redirectTo;t||(t=window.sessionStorage?.getItem("login_redirect_to")),window.sessionStorage?.removeItem("login_redirect_to"),this.props.loginSocialUser(e,t).then(()=>{this.recordSocialLoginEvent("calypso_login_social_login_success",e.service),this.props.onSuccess()},t=>{if("user_exists"===t.code||"unknown_user"===t.code)return void this.props.createSocialUserFailed(e,t,"login");this.recordSocialLoginEvent("calypso_login_social_login_failure",e.service,{error_code:t.code,error_message:t.message})})}),(0,o.A)(this,"trackLoginAndRememberRedirect",(e,t=!1)=>{let s=e.currentTarget.getAttribute("data-social-service");this.recordSocialLoginEvent("calypso_login_social_button_click",s,{is_last_used_authentication_method:t}),this.props.redirectTo&&window.sessionStorage?.setItem("login_redirect_to",this.props.redirectTo)}),(0,o.A)(this,"recordSocialLoginEvent",(e,t,s)=>this.props.recordTracksEvent(e,{social_account_type:t,...s})),(0,o.A)(this,"resetLastUsedAuthenticationMethod",()=>{this.setState({lastUsedAuthenticationMethod:"password"})})}componentDidMount(){let{disableAutoFocus:e}=this.props;this.setState({isFormDisabledWhileLoading:!1},()=>{e||(0,ed.A)(()=>this.usernameOrEmail&&this.usernameOrEmail.focus())});let t=new URL(window.location);this.props.currentQuery?.username_only&&(t.searchParams.delete("username_only"),window.history.replaceState({},document.title,t))}componentDidUpdate(e,t){let{currentRoute:s,disableAutoFocus:o,requestError:i,handleUsernameChange:r}=this.props;r&&t.usernameOrEmail!==this.state.usernameOrEmail&&r(this.state.usernameOrEmail),!e.requestError&&i&&("password"===i.field&&(o||(0,ed.A)(()=>this.password&&this.password.focus())),"usernameOrEmail"===i.field&&(o||(0,ed.A)(()=>this.usernameOrEmail&&this.usernameOrEmail.focus())),s&&s.includes("/log-in/jetpack")&&"unknown_user"===i.code&&!this.props.isWooJPC&&this.jetpackCreateAccountWithMagicLink())}UNSAFE_componentWillReceiveProps(e){let{disableAutoFocus:t}=this.props;this.props.socialAccountIsLinking!==e.socialAccountIsLinking&&e.socialAccountIsLinking&&(this.setState({usernameOrEmail:e.socialAccountLinkEmail}),this.props.getAuthAccountType(e.socialAccountLinkEmail)),this.props.hasAccountTypeLoaded&&!e.hasAccountTypeLoaded&&(this.setState({password:""}),t||(0,ed.A)(()=>this.usernameOrEmail&&this.usernameOrEmail.focus())),!this.props.hasAccountTypeLoaded&&(0,U.Sp)(e.accountType)&&(t||(0,ed.A)(()=>this.password&&this.password.focus())),e.requestError&&this.setState({emailSuggestionError:!1,emailSuggestion:""})}isFullView(){let{accountType:e,hasAccountTypeLoaded:t,socialAccountIsLinking:s}=this.props;return s||t&&(0,U.Sp)(e)}isPasswordView(){let{accountType:e,hasAccountTypeLoaded:t,socialAccountIsLinking:s}=this.props;return!s&&t&&(0,U.Sp)(e)}isUsernameOrEmailView(){let{hasAccountTypeLoaded:e,socialAccountIsLinking:t,isSendingEmail:s}=this.props;return s||!t&&!e}loginUser(){let{password:e,usernameOrEmail:t}=this.state,{onSuccess:s,redirectTo:o,domain:i}=this.props;this.props.recordTracksEvent("calypso_login_block_login_form_submit"),this.props.loginUser(t,e,o,i).then(()=>{this.props.recordTracksEvent("calypso_login_block_login_form_success"),s(o)}).catch(e=>{this.props.recordTracksEvent("calypso_login_block_login_form_failure",{error_code:e.code,error_message:e.message})})}jetpackCreateAccountWithMagicLink(){(0,ep.A)(this.state.usernameOrEmail,"@")&&this.props.sendEmailLogin(this.state.usernameOrEmail,{redirectTo:this.props.redirectTo,requestLoginEmailFormFlow:!0,createAccount:!0,...(0,eU.z)({isJetpack:this.props.isJetpack})&&{tokenType:"code"},flow:"jetpack"}),(0,i.A)((0,ef.A)({email_address:this.state.usernameOrEmail},"/log-in/jetpack/link"))}recordWooCommerceLoginTracks(e){let{isWoo:t,wccomFrom:s}=this.props;t&&"cart"===s&&this.props.recordTracksEvent("wcadmin_storeprofiler_payment_login",{login_method:e})}renderChangeUsername(){return this.props.isGravatarFixedAccountLogin?null:(0,x.FD)(en.Ay,{type:"button",className:"login__form-change-username",onClick:this.resetView,variant:"link",size:"compact",children:[(0,x.Y)(X.A,{icon:"arrow-left",size:18}),(0,ep.A)(this.state.usernameOrEmail,"@")?this.props.translate("Change email address"):this.props.translate("Change username")]})}renderUsernameorEmailLabel(){if(this.props.currentQuery?.username_only==="true")return this.props.translate("Your username");if(this.isPasswordView())return this.renderChangeUsername();let e=!this.props.isJetpack||this.props.isWoo;return(0,x.FD)(x.FK,{children:[(0,x.Y)("span",{className:"screen-reader-text",children:this.props.translate("WordPress.com email address or username")}),e&&(0,x.Y)("span",{"aria-hidden":"true",children:this.props.translate("Email address or username")})]})}renderLostPasswordLink(){return(0,x.Y)("a",{className:"login__form-forgot-password",href:"/",onClick:e=>{e.preventDefault(),this.props.recordTracksEvent("calypso_login_reset_password_link_click"),(0,i.A)((0,k.iD)({redirectTo:this.props.redirectTo,locale:this.props.locale,action:this.props.isWooJPC?"jetpack/lostpassword":"lostpassword",oauth2ClientId:this.props.oauth2Client&&this.props.oauth2Client.id,from:(0,l.A)(this.props.currentQuery,"from")}))},children:this.props.translate("Forgot password?")})}getSignupUrl(){let{oauth2Client:e,currentQuery:t,currentRoute:s,pathname:o,locale:i}=this.props;if(this.props.signupUrl){let e=this.props.signupUrl.replace(/\s/g,"");return window.location.origin+(0,_.FE)(e)}return(0,_.c5)(t,s,e,i,o)}getMagicLoginPageLink(){if(!(0,_.UT)(this.props.twoFactorAuthType,this.props.oauth2Client))return null;let{query:e,usernameOrEmail:t}=this.props;return(0,_.YT)({locale:this.props.locale,currentRoute:this.props.currentRoute,signupUrl:this.props.currentQuery?.signup_url,oauth2ClientId:this.props.oauth2Client?.id,emailAddress:t||e?.email_address||this.state.usernameOrEmail,redirectTo:this.props.redirectTo})}getQrLoginLink(){return(0,_.UT)(this.props.twoFactorAuthType,this.props.oauth2Client)?(0,_.YT)({locale:this.props.locale,twoFactorAuthType:this.props.isJetpack?"jetpack/qr":"qr",redirectTo:this.props.redirectTo,signupUrl:this.props.currentQuery?.signup_url}):null}renderMagicLoginLink(){let e=this.getMagicLoginPageLink();return e?this.props.translate("{{errorWrapper}}It seems you entered an incorrect password. Want to get a {{magicLoginLink}}login link{{/magicLoginLink}} via email?{{/errorWrapper}}",{components:{magicLoginLink:(0,x.Y)("a",{href:e,onClick:()=>this.handleMagicLoginClick("login-form")}),errorWrapper:(0,x.Y)("p",{className:"login-form__validation-error-wrapper"})}}):null}renderPasswordValidationError(){return this.renderMagicLoginLink()??this.props.requestError.message}handleAcceptEmailSuggestion(){this.props.recordTracksEvent("calypso_login_email_suggestion_confirmation",{original_email:JSON.stringify(this.state.usernameOrEmail),suggested_email:JSON.stringify(this.state.emailSuggestion)}),this.setState({usernameOrEmail:this.state.emailSuggestion,emailSuggestion:"",emailSuggestionError:!1})}getLastUsedAuthenticationMethod(){return"undefined"!=typeof document&&this.props.currentQuery?.username_only!=="true"?ec.parse(document.cookie).last_used_authentication_method??"":""}renderLoginCard(){let e,{requestError:t,socialAccountIsLinking:s,isWoo:o,isSendingEmail:i,isSocialFirst:n,isGravPoweredClient:a,isGravatarFixedAccountLogin:c}=this.props,{lastUsedAuthenticationMethod:l}=this.state,p=this.state.isFormDisabledWhileLoading||this.props.isFormDisabled,d=p||this.isPasswordView()||c,u=this.isUsernameOrEmailView(),h=this.getSignupUrl(),g=!u&&o;"qr-code"===l?e=this.getQrLoginLink():"magic-login"===l&&(e=this.getMagicLoginPageLink());let _=(0,ef.A)({user_email:this.state.usernameOrEmail},h);return(0,x.Y)(ee.A,{className:"login__form",children:l&&"password"!==l&&"magic-login"!==l&&n?(0,x.FD)(x.FK,{children:[(0,x.Y)("span",{className:"last-used-authentication-method",children:this.props.translate("Previously used")}),(0,x.Y)(ey.dV,{lastUsedAuthenticationMethod:this.state.lastUsedAuthenticationMethod,handleLogin:this.handleSocialLogin,loginUrl:e,onClick:e=>this.trackLoginAndRememberRedirect(e,!0),socialServiceResponse:this.props.socialServiceResponse})]}):(0,x.FD)(x.FK,{children:[o&&(0,x.Y)(Z,{}),(0,x.FD)("div",{className:"login__form-userdata",children:[!o&&s&&(0,x.Y)("p",{children:this.props.translate('We found a WordPress.com account with the email address "%(email)s". Log in to this account to connect it to your %(service)s profile, or choose a different %(service)s profile.',{args:{email:this.props.socialAccountLinkEmail,service:(0,eu.A)(this.props.socialAccountLinkService)}})}),(0,x.Y)(et.A,{htmlFor:"usernameOrEmail",hasCoreStylesNoCaps:!0,children:this.renderUsernameorEmailLabel()}),(0,x.Y)(eA.A,{autoCapitalize:"off",autoCorrect:"off",spellCheck:"false",autoComplete:"username",className:(0,r.A)({"is-error":t&&"usernameOrEmail"===t.field}),onChange:this.onChangeUsernameOrEmailField,id:"usernameOrEmail",name:"usernameOrEmail",ref:this.saveUsernameOrEmailRef,value:this.state.usernameOrEmail,disabled:d,hasCoreStyles:!0}),t&&"usernameOrEmail"===t.field&&(0,x.Y)(es.A,{isError:!0,text:t.message,children:"unknown_user"===t.code&&this.props.translate(" Would you like to {{newAccountLink}}create a new account{{/newAccountLink}}?",{components:{newAccountLink:(0,x.Y)("a",{onClick:e=>{e.preventDefault(),window.location.href=_},href:_})}})}),!t&&this.state.emailSuggestionError&&(0,x.Y)(es.A,{isError:!0,text:this.props.translate("User does not exist. Did you mean {{suggestedEmail/}}, or would you like to {{newAccountLink}}create a new account{{/newAccountLink}}?",{components:{newAccountLink:(0,x.Y)("a",{href:(0,ef.A)({user_email:this.state.usernameOrEmail},h)}),suggestedEmail:(0,x.Y)("span",{className:"login__form-suggested-email",onKeyDown:e=>{"Enter"===e.key&&this.handleAcceptEmailSuggestion()},onClick:()=>{this.handleAcceptEmailSuggestion()},role:"button",tabIndex:"0",children:this.state.emailSuggestion})}})}),o&&s&&(0,x.Y)(m.A,{className:"login__form-user-exists-notice",status:"is-warning",icon:(0,x.Y)(ea.A,{icon:eo.A,size:20,fill:"#d67709"}),showDismiss:!0,onDismissClick:this.props.cancelSocialAccountConnectLinking,text:this.props.translate("You already have a WordPress.com account with this email address. Add your password to log in or {{signupLink}}create a new account{{/signupLink}}.",{components:{signupLink:(0,x.Y)("a",{href:h})}})}),(0,x.FD)("div",{className:(0,r.A)("login__form-password",{"is-hidden":u}),"aria-hidden":u,children:[(0,x.Y)(et.A,{htmlFor:"password",hasCoreStylesNoCaps:!0,children:this.props.translate("Password")}),(0,x.Y)(ek.A,{autoCapitalize:"off",autoComplete:"current-password",className:(0,r.A)({"is-error":t&&"password"===t.field}),onChange:this.onChangeField,id:"password",name:"password",ref:this.savePasswordRef,value:this.state.password,disabled:p,tabIndex:u?-1:void 0,hasCoreStyles:!0,isHidden:u}),t&&"password"===t.field&&(0,x.Y)(es.A,{isError:!0,text:this.renderPasswordValidationError()})]})]}),a&&(0,x.Y)("p",{className:"login__form-terms",children:this.props.translate("By continuing with any of the options below, you agree to our {{tosLink}}Terms of Service{{/tosLink}} and have read our {{privacyLink}}Privacy Policy{{/privacyLink}}.",{components:{tosLink:(0,x.Y)("a",{href:(0,ei.rm)("https://web.archive.org/web/20250820114040/https://wordpress.com/tos/"),target:"_blank",rel:"noopener noreferrer"}),privacyLink:(0,x.Y)("a",{href:(0,ei.rm)("https://web.archive.org/web/20250820114040/https://automattic.com/privacy/"),target:"_blank",rel:"noopener noreferrer"})}})}),g&&this.renderLostPasswordLink(),(0,x.Y)("div",{className:"login__form-action",children:(0,x.Y)(ew,{isWoo:o,isSendingEmail:i,isDisabled:p,buttonText:this.getLoginButtonText()})})]})})}renderLoginOptions(){let{oauth2Client:e,currentQuery:t,isWooJPC:s,isSocialFirst:o,isJetpack:i,isGravatarFixedAccountLogin:r}=this.props,{lastUsedAuthenticationMethod:n}=this.state,a=s&&t.lostpassword_flow,c=function(e,t){if(!(0,w.V5)(t)||!e?.redirect_to)return!1;let s=decodeURI(e.redirect_to),o=(0,eN.d)(s,"redirect_uri");return o?.includes("/client/")}(t,e),l=n&&"password"!==n&&"magic-login"!==n&&o,d=z.Ay.isEnabled("signup/social")&&!c&&!a&&!r;return(0,x.FD)(x.FK,{children:[this.renderLoginCard(),d&&(0,x.FD)(p.Fragment,{children:[(0,x.Y)(eh.S,{}),(0,x.Y)(eY,{lastUsedAuthenticationMethod:l?this.state.lastUsedAuthenticationMethod:"",handleLogin:this.handleSocialLogin,trackLoginAndRememberRedirect:this.trackLoginAndRememberRedirect,resetLastUsedAuthenticationMethod:this.resetLastUsedAuthenticationMethod,socialServiceResponse:this.props.socialServiceResponse,isSocialFirst:o,magicLoginLink:s?null:this.getMagicLoginPageLink(),qrLoginLink:this.getQrLoginLink(),isJetpack:i})]})]})}render(){let{currentQuery:e,showSocialLoginFormOnly:t,isWoo:s,isBlazePro:o,isSocialFirst:i,isJetpack:n,isOneTapAuth:a,socialAccountIsLinking:c}=this.props;return t?z.Ay.isEnabled("signup/social")?(0,x.FD)(p.Fragment,{children:[(0,x.Y)(eh.S,{}),(0,x.Y)(eY,{handleLogin:this.handleSocialLogin,trackLoginAndRememberRedirect:this.trackLoginAndRememberRedirect,socialServiceResponse:this.props.socialServiceResponse,isJetpack:n})]}):null:(0,x.FD)(x.FK,{children:[a&&!c&&(0,x.Y)(eP.A,{}),(0,x.FD)("form",{className:(0,r.A)({"is-social-first":i,"is-woo-passwordless":s,"is-blaze-pro":o}),onSubmit:this.onSubmitForm,method:"post",children:[this.renderLoginOptions(),this.showJetpackConnectSiteOnly()&&(0,x.Y)(eg.A,{homeUrl:e?.site,redirectAfterAuth:e?.redirect_after_auth,source:"login"})]})]})}}let eD=(0,d.Ng)((e,t)=>{let s=(0,N.Kg)(e),o=(0,L.AL)(e),i=(0,j.A)(e),r=(0,w.Dr)(o)&&i?.gravatar_from==="3rd-party",n=(0,w.Dr)(o)&&i?.gravatar_from==="quick-editor",a=!!((0,w.r7)(o)&&i?.email_address);return{accountType:s,currentRoute:(0,O.A)(e),hasAccountTypeLoaded:null!==s,isFormDisabled:(0,N.d7)(e),oauth2Client:o,isFromAutomatticForAgenciesPlugin:"automattic-for-agencies-client"===(0,l.A)((0,j.A)(e),"from"),isWooJPC:(0,$.Ay)(e),isWoo:(0,W.A)(e),redirectTo:(0,N.P7)(e),requestError:(0,N.CD)(e),socialAccountIsLinking:(0,N.xk)(e),socialAccountLinkEmail:(0,N.Vg)(e),socialAccountLinkService:(0,N.k8)(e),userEmail:t.userEmail||(0,q.A)(e)?.email_address||(0,j.A)(e)?.email_address,socialService:(0,q.A)(e)?.service,wccomFrom:(0,I.A)(e),currentQuery:i,isBlazePro:(0,eF.A)(e),isOneTapAuth:!!(0,l.A)((0,j.A)(e),"oneTapAuth"),isGravatarFixedAccountLogin:r||n||a,isGravPoweredClient:(0,w.rZ)(o)}},{sendEmailLogin:C.Y,formUpdate:ev.O,getAuthAccountType:eL.K,loginUser:(e,t,s,o)=>i=>(i({type:eS.sbl}),(0,U.Pb)("login-endpoint",{username:e,password:t,remember_me:!0,redirect_to:s,client_id:(0,z.Ay)("wpcom_signup_id"),client_secret:(0,z.Ay)("wpcom_signup_key"),domain:o,tos:JSON.stringify((0,ex.A)()),anon_id:(0,ej._T)()}).then(e=>("sms"===(0,l.A)(e,"body.data.two_step_notification_sent")&&i({type:eS.xFm,notice:{message:(0,U.qS)(e),status:"is-success"},twoStepNonce:(0,l.A)(e,"body.data.two_step_nonce_sms")}),(0,l.A)(e,"body.data.two_step_notification_sent"))?i({type:eS.iC9,data:e.body&&e.body.data}):(0,eC.n)((0,l.A)(e,"body.data.token_links",[])).then(()=>{i({type:eS.iC9,data:e.body&&e.body.data})})).catch(e=>{let t=(0,U.ht)(e);return i({type:eS.vfY,error:t}),Promise.reject(t)})),recordTracksEvent:eb.K,resetAuthAccountType:eL.h,resetMagicLoginRequestForm:Y.fk,cancelSocialAccountConnectLinking:function(){return{type:eS.f8K}},createSocialUserFailed:eE.Q,loginSocialUser:eT.M})((0,a.A)(eR));var eO=()=>s.e(16519).then(s.bind(s,"./blocks/login/social-connect-prompt.jsx")),eq=()=>s.e(73355).then(s.bind(s,"./blocks/login/lost-password-form.jsx")),eM=()=>s.e(73594).then(s.bind(s,"./blocks/login/two-factor-authentication/two-factor-content.jsx"));class eW extends p.Component{constructor(...e){super(...e),(0,o.A)(this,"state",{isBrowserSupported:(0,A.B)()}),(0,o.A)(this,"sendMagicLoginLink",(e={})=>{this.props.sendEmailLogin(e),this.handleTwoFactorRequested("link")}),(0,o.A)(this,"showContinueAsUser",()=>{let{isJetpack:e,oauth2Client:t,socialConnect:s,twoStepNonce:o,fromSite:i,currentUser:r,twoFactorEnabled:n,loginEmailAddress:a,isWCCOM:c,isBlazePro:l}=this.props;return!o&&!s&&!(t&&!c&&!l)&&!e&&!i&&!n&&!a&&r}),(0,o.A)(this,"handleTwoFactorRequested",e=>{this.props.onTwoFactorRequested?this.props.onTwoFactorRequested(e):this.props.isWCCOM||this.props.isGravPoweredClient?(0,i.A)((0,k.iD)({isJetpack:this.props.isJetpack,twoFactorAuthType:e,locale:this.props.locale,oauth2ClientId:this.props.oauth2Client?.id,redirectTo:this.props.redirectTo})):(0,i.A)((0,k.iD)({isJetpack:this.props.isJetpack,twoFactorAuthType:e,locale:this.props.locale,from:this.props.currentQuery?.from}))}),(0,o.A)(this,"handleSocialConnectStart",()=>{this.props.onSocialConnectStart?this.props.onSocialConnectStart():(0,i.A)((0,k.iD)({socialConnect:!0,locale:this.props.locale}))}),(0,o.A)(this,"handleValidLogin",()=>{if(this.props.twoFactorEnabled){let e;e=this.state.isBrowserSupported&&this.props.isSecurityKeySupported&&"push"!==this.props.twoFactorNotificationSent?"webauthn":this.props.twoFactorNotificationSent.replace("none","authenticator"),this.handleTwoFactorRequested(e)}else this.props.isLinking?this.handleSocialConnectStart():this.rebootAfterLogin()}),(0,o.A)(this,"handleValid2FACode",()=>{this.props.isLinking?this.handleSocialConnectStart():this.rebootAfterLogin()}),(0,o.A)(this,"handleContinueAsAnotherUser",()=>{this.props.redirectToLogout(window.location.href)}),(0,o.A)(this,"rebootAfterLogin",()=>{this.props.rebootAfterLogin({social_service_connected:this.props.socialConnect})}),(0,o.A)(this,"getSignupLinkComponent",()=>{let e=this.getSignupUrl();return(0,x.Y)("a",{href:e,onClick:t=>{this.props.isLoggedIn&&(t.preventDefault(),this.props.redirectToLogout(e)),t.preventDefault(),window.location.href=e}})}),(0,o.A)(this,"getSignupUrl",()=>{let{currentRoute:e,oauth2Client:t,currentQuery:s,initialQuery:o,pathname:i,locale:r,signupUrl:n,isWCCOM:a,isWooJPC:l}=this.props;return n?window.location.origin+(0,_.FE)(n):a&&(0,c.A)(s)?"https://web.archive.org/web/20250820114040/https://woocommerce.com/start/":l&&(0,c.A)(s)?(0,_.c5)(o,e,t,r,i):(0,_.c5)(s,e,t,r,i)})}componentDidMount(){!this.props.twoFactorEnabled&&this.props.twoFactorAuthType&&(0,i.A)((0,k.iD)({isJetpack:this.props.isJetpack,locale:this.props.locale,currentQuery:this.props.currentQuery})),this.props.currentQuery?.error==="google_one_tap_auth"&&this.props.showErrorNotice(this.props.translate("Something went wrong when trying to connect with Google. Please use any of the login options below.")),window.scrollTo(0,0)}componentDidUpdate(e){let t=this.props.requestNotice!==e.requestNotice;(this.props.twoFactorAuthType!==e.twoFactorAuthType||t)&&window.scrollTo(0,0),!e.accountType&&(0,U.ec)(this.props.accountType)&&this.props.sendEmailLogin(),this.props.isWooJPC&&this.props.requestError?.code==="unknown_user"&&n.validate(this.props.usernameOrEmail)&&this.sendMagicLoginLink({createAccount:!0}),e.isSendingEmail&&this.props.emailRequested&&this.handleTwoFactorRequested("link");let s=this.props.currentQuery?.username_only==="true";if(this.props.requestError?.field==="usernameOrEmail"&&this.props.requestError?.code==="email_login_not_allowed"&&!s){let e={locale:this.props.locale,twoFactorAuthType:"link",oauth2ClientId:this.props.currentQuery?.client_id,redirectTo:this.props.redirectTo,usernameOnly:!0};this.props.isGravPoweredClient&&(e={...e,gravatarFrom:(0,w.Dr)(this.props.oauth2Client)&&this.props.currentQuery?.gravatar_from,gravatarFlow:(0,w.r7)(this.props.oauth2Client),emailAddress:this.props.currentQuery?.email_address});let t=(0,k.iD)(e);(0,i.A)(t)}}renderLoginFormSignupNotice(){return(0,x.Y)(m.A,{status:"is-transparent-info",showDismiss:!1,children:this.props.translate("This email address is already associated with an account. Please consider {{returnToSignup}}using another one{{/returnToSignup}} or log in.",{components:{returnToSignup:(0,x.Y)("a",{href:this.getSignupUrl(),onClick:this.recordSignUpLinkClick})}})})}renderNotice(){let{requestNotice:e}=this.props;return e?(0,x.Y)(m.A,{status:e.status,showDismiss:!1,children:e.message}):null}renderContent(){let{domain:e,isJetpack:t,twoFactorAuthType:s,twoFactorEnabled:o,twoFactorNotificationSent:i,socialConnect:r,socialService:n,socialServiceResponse:a,disableAutoFocus:c,locale:d,userEmail:m,handleUsernameChange:h,signupUrl:g,isWCCOM:_,isBlazePro:w,translate:k,action:A,currentQuery:y,isGravPoweredClient:f,isSocialFirst:b,isFromAutomatticForAgenciesPlugin:v,currentUser:L,redirectTo:j,isWooJPC:S,isWoo:C}=this.props,E=this.getSignupLinkComponent();return r?(0,x.Y)(u.A,{require:eO,onSuccess:this.handleValidLogin}):"lostpassword"===A?(0,x.Y)(p.Fragment,{children:(0,x.Y)("div",{className:"login__lost-password-form-wrapper",children:(0,x.Y)(u.A,{require:eq,redirectToAfterLoginUrl:this.props.redirectTo,oauth2ClientId:this.props.oauth2Client&&this.props.oauth2Client.id,locale:d,isWoo:C,isWooJPC:S,from:(0,l.A)(y,"from"),isJetpack:t})})}):o&&s?(0,x.FD)(p.Fragment,{children:[(0,x.Y)(u.A,{require:eM,isBrowserSupported:this.state.isBrowserSupported,isJetpack:t,isBlazePro:w,isGravPoweredClient:f,twoFactorAuthType:s,twoFactorNotificationSent:i,handleValid2FACode:this.handleValid2FACode,rebootAfterLogin:this.rebootAfterLogin,switchTwoFactorAuthType:this.handleTwoFactorRequested}),C&&(0,x.FD)("div",{className:"login__two-factor-footer",children:[(0,x.Y)("p",{className:"login__two-factor-no-account",children:k("Don’t have an account? {{signupLink}}Sign up{{/signupLink}}",{components:{signupLink:E}})}),(0,x.Y)("p",{className:"login__two-factor-cannot-access-phone",children:k("Can’t access your phone? {{contactUsLink}}Contact us{{/contactUsLink}}",{components:{contactUsLink:(0,x.Y)("a",{href:"https://web.archive.org/web/20250820114040/https://wordpress.com/help/contact",target:"_blank",rel:"noreferrer"})}})})]})]}):this.showContinueAsUser()?_||w?(0,x.FD)("div",{className:"login__body login__body--continue-as-user",children:[(0,x.Y)(B.A,{currentUser:L,onChangeAccount:this.handleContinueAsAnotherUser,redirectPath:j,isBlazePro:w,isWoo:_}),(0,x.Y)(eD,{disableAutoFocus:c,onSuccess:this.handleValidLogin,socialService:n,socialServiceResponse:a,domain:e,locale:d,userEmail:m,handleUsernameChange:h,signupUrl:g,showSocialLoginFormOnly:!0,sendMagicLoginLink:this.sendMagicLoginLink,isFromAutomatticForAgenciesPlugin:v})]}):(0,x.Y)(B.A,{currentUser:L,onChangeAccount:this.handleContinueAsAnotherUser,redirectPath:j}):(0,x.Y)(eD,{disableAutoFocus:c,onSuccess:this.handleValidLogin,socialService:n,socialServiceResponse:a,domain:e,locale:d,userEmail:m,handleUsernameChange:h,signupUrl:g,sendMagicLoginLink:this.sendMagicLoginLink,isFromAkismet:this.props.isFromAkismet,isSendingEmail:this.props.isSendingEmail,isSocialFirst:b,isJetpack:t,isFromAutomatticForAgenciesPlugin:v,loginButtonText:S&&this.props.initialQuery?.lostpassword_flow==="true"?k("Log in"):null})}renderFooter(){return!this.showContinueAsUser()&&this.props.footer}render(){let{isFromAkismet:e,isJetpack:t,oauth2Client:s,locale:o,isWCCOM:i,isFromAutomatticForAgenciesPlugin:n,action:a,fromSite:c,isGravPoweredClient:l,isGravPoweredLoginPage:p,isManualRenewalImmediateLoginAttempt:d,isSignupExistingAccount:u,linkingSocialService:m,socialConnect:h,twoStepNonce:g,twoFactorAuthType:_}=this.props;return(0,x.FD)("div",{className:(0,r.A)("login",{"is-akismet":e,"is-jetpack":t,"is-jetpack-cloud":(0,w.uf)(s),"is-automattic-for-agencies-flow":n,"is-a4a":(0,w.V5)(s)}),children:[l&&(0,x.Y)(S,{action:a,fromSite:c,isGravPoweredLoginPage:p,isManualRenewalImmediateLoginAttempt:d,linkingSocialService:m,socialConnect:h,twoStepNonce:g,twoFactorAuthType:_}),u&&this.renderLoginFormSignupNotice(),!i&&(0,x.Y)(Z,{locale:o}),this.renderNotice(),this.renderContent(),this.renderFooter()]})}}(0,o.A)(eW,"defaultProps",{isJetpack:!1});let eJ=(0,d.Ng)(e=>({accountType:(0,N.Kg)(e),redirectTo:(0,N.P7)(e),usernameOrEmail:(0,N.n0)(e),currentUser:(0,T.HW)(e),requestNotice:(0,N.sN)(e),twoFactorEnabled:(0,N.DO)(e),twoFactorNotificationSent:(0,N.Z0)(e),oauth2Client:(0,L.AL)(e),isLinking:(0,N.xk)(e),isManualRenewalImmediateLoginAttempt:(0,F.CV)(e),isSecurityKeySupported:(0,N.Gd)(e,"webauthn"),linkingSocialService:(0,N.k8)(e),partnerSlug:(0,J.A)(e),isFromAkismet:(0,h.A)(new URLSearchParams((0,N.P7)(e)?.split("?")[1]).get("back")),isFromAutomatticForAgenciesPlugin:"automattic-for-agencies-client"===(0,l.A)((0,j.A)(e),"from")||"automattic-for-agencies-client"===new URLSearchParams((0,N.P7)(e)?.split("?")[1]).get("from"),isWooJPC:(0,$.Ay)(e),isWCCOM:(0,M.A)(e),isWoo:(0,W.A)(e),wccomFrom:(0,I.A)(e),currentQuery:(0,j.A)(e),initialQuery:(0,q.A)(e),currentRoute:(0,O.A)(e),loginEmailAddress:(0,j.A)(e)?.email_address,isBlazePro:(0,w.kY)((0,L.AL)(e)),isSignupExistingAccount:!!((0,q.A)(e)?.is_signup_existing_account||(0,j.A)(e)?.is_signup_existing_account),requestError:(0,N.CD)(e),isSendingEmail:(0,V.A)(e),emailRequested:(0,K.A)(e),isLoggedIn:(0,T.x3)(e),from:(0,l.A)((0,j.A)(e),"from")}),{rebootAfterLogin:P.x,hideMagicLoginRequestForm:Y.Cc,sendEmailLogin:C.Y,logoutUser:R.y,redirectToLogout:E.cW,errorNoticeAction:D.tg},(e,t,s)=>({...s,...e,...t,showErrorNotice:(e,s)=>t.errorNoticeAction(e,s),sendEmailLogin:(o={})=>t.sendEmailLogin(e.usernameOrEmail,{redirectTo:e.redirectTo,loginFormFlow:!0,showGlobalNotices:!1,...(0,eU.z)({isJetpack:s.isJetpack})&&{tokenType:"code"},source:e.isWooJPC?"woo-passwordless-jpc-"+(0,l.A)(e,"from"):"",flow:s.isJetpack&&"jetpack"||s.isGravPoweredClient&&(0,g.A)(s.oauth2Client)||null,...o})}))((0,a.A)(eW))},"./blocks/login/one-tap-auth-loader-overlay.tsx":(e,t,s)=>{s.d(t,{A:()=>r});var o=s("../packages/onboarding/src/step-container-v2/wireframes/Loading/Loading.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r({showCompactLogo:e}){return(0,i.Y)("div",{className:"one-tap-auth-loader-overlay",children:(0,i.Y)(o.R,{compactLogo:e?"always":void 0})})}},"./blocks/visit-site/index.jsx":(e,t,s)=>{s.d(t,{A:()=>a});var o=s("../packages/i18n-calypso/src/use-translate.js"),i=s("../node_modules/react/index.js"),r=s("./lib/wp/browser.js"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a({siteSlug:e}){let t=(0,o.A)(),s=function(e){let[t,s]=(0,i.useState)(null);return(0,i.useEffect)(()=>{r.A.site(e).get({apiVersion:"1.2"}).then(s)},[e]),t}(e);if(!s)return null;let a=(0,n.Y)("a",{href:s.URL,children:e.replace("::","/")});return(0,n.Y)("div",{className:"visit-site",children:t("or visit {{siteLink/}}",{components:{siteLink:a},context:"Alternative link under login/site-selection header, leads to site frontend."})})}},"./components/gravatar-login-logo/index.tsx":(e,t,s)=>{s.d(t,{A:()=>r});var o=s("./state/oauth2-clients/reducer.js"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r({iconUrl:e,alt:t,isCoBrand:s,width:r=32,height:n=32}){return(0,i.Y)("div",{className:"gravatar-login-logo",children:e?(0,i.FD)(i.FK,{children:[(0,i.Y)("img",{className:"gravatar-login-logo__logo-img",src:e,alt:t,width:r,height:n}),s&&(0,i.Y)("img",{className:"gravatar-login-logo__logo-img gravatar-login-logo__logo-img--with-co-brand",src:"https://web.archive.org/web/20250820114040/https://gravatar.com/images/grav-logo-with-bg.svg",alt:"Gravatar",width:r,height:n})]}):(0,i.Y)("img",{className:"gravatar-login-logo__logo-img",src:o.ej.icon,alt:o.ej.title,width:r,height:n})})}},"./components/info-popover/index.jsx":(e,t,s)=>{s.d(t,{A:()=>d});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../packages/components/src/gridicon/index.tsx"),r=s("../packages/components/src/popover/index.jsx"),n=s("../node_modules/clsx/dist/clsx.mjs"),a=s("../packages/i18n-calypso/src/index.ts"),c=s("../node_modules/react/index.js"),l=s("./lib/analytics/ga.js"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends c.Component{constructor(...e){super(...e),(0,o.A)(this,"iconRef",(0,c.createRef)()),(0,o.A)(this,"state",{showPopover:!1}),(0,o.A)(this,"handleClick",e=>{let{onOpen:t,showOnHover:s}=this.props,{showPopover:o}=this.state;e.preventDefault(),e.stopPropagation(),s||(o||t?.(),this.setState({showPopover:!o},this.recordStats))}),(0,o.A)(this,"handleClose",()=>{this.props.onClose?.(),this.setState({showPopover:!1},this.recordStats)}),(0,o.A)(this,"recordStats",()=>{let{gaEventCategory:e,popoverName:t}=this.props;if(e&&t){let s=this.state.showPopover?" Opened":" Closed";(0,l.WI)(e,"InfoPopover: "+t+s)}}),(0,o.A)(this,"handleOnMouseEnterButton",()=>{let{onOpen:e,showOnHover:t}=this.props;t&&(e?.(),this.setState({showPopover:!0},this.recordStats))}),(0,o.A)(this,"handleOnMouseLeave",()=>{setTimeout(()=>{let{showOnHover:e}=this.props;e&&(this.inPopover||this.setState({showPopover:!1},this.recordStats))},250)}),(0,o.A)(this,"handleOnMouseEnterPopover",()=>{this.inPopover=!0}),(0,o.A)(this,"handleOnMouseLeavePopover",()=>{this.inPopover=!1,this.handleOnMouseLeave()})}render(){return(0,p.FD)(c.Fragment,{children:[(0,p.Y)("button",{type:"button","aria-haspopup":!0,"aria-expanded":this.state.showPopover,"aria-label":this.props["aria-label"]||(0,a.Tl)("More information"),onClick:this.handleClick,onMouseEnter:this.handleOnMouseEnterButton,onMouseLeave:this.handleOnMouseLeave,ref:this.iconRef,className:(0,n.A)("info-popover",this.props.className,{"is-active":this.state.showPopover}),children:(0,p.Y)(i.A,{icon:this.props.icon,size:this.props.iconSize})}),this.state.showPopover&&(0,p.Y)(r.A,{autoRtl:this.props.autoRtl,id:this.props.id,isVisible:!0,context:this.iconRef.current,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this.handleClose,className:(0,n.A)("info-popover__tooltip",this.props.className),onMouseEnter:this.handleOnMouseEnterPopover,onMouseLeave:this.handleOnMouseLeavePopover,children:this.props.children})]})}}(0,o.A)(d,"defaultProps",{autoRtl:!0,icon:"info-outline",iconSize:18,position:"bottom",showOnHover:!1})},"./lib/get-gravatar-oauth2-flow.js":(e,t,s)=>{s.d(t,{A:()=>i});var o=s("./state/oauth2-clients/reducer.js");function i(e){return e.name?e.name:o.X9[e.id]?.name??e.source}},"./lib/login/index.js":(e,t,s)=>{s.d(t,{FE:()=>u,Mm:()=>w,UT:()=>h,YT:()=>g,c5:()=>m,j1:()=>d});var o=s("../packages/calypso-config/src/index.ts"),i=s("../packages/i18n-utils/src/utils.ts"),r=s("../packages/i18n-calypso/src/index.ts"),n=s("../node_modules/lodash-es/get.js"),a=s("../node_modules/lodash-es/startsWith.js"),c=s("../node_modules/lodash-es/includes.js"),l=s("./lib/oauth2-clients.js"),p=s("./lib/paths/index.js");function d(e){return e?e===(0,o.Ay)("google_oauth_client_id")?"google":e===(0,o.Ay)("facebook_app_id")?"facebook":e===(0,o.Ay)("apple_oauth_client_id")?"apple":null:null}function u(e){if("string"!=typeof e)return"";let t=e.replace(/<\/?[^>]+(>|$)/g,"").replace(/^[a-zA-Z][a-zA-Z\d+\-.]*:/,"").replace(/\s/g,"");return t?`/${t.replace(/^\/+/,"")}`:""}function m(e,t,s,o,r){let d=(0,n.A)(e,"redirect_to","");if((0,a.A)(t,"/log-in/jetpack")){if((0,c.A)(d,"/jetpack/connect/authorize")&&(0,c.A)(d,"_wp_nonce")){let t=(0,n.A)(e,"plugin_name");try{let e=new URL(d);if(!e.searchParams.has("plugin_name")&&t)return e.searchParams.set("plugin_name",t),e.toString()}catch{return"/jetpack/connect"}return d}return"/jetpack/connect"}if("/jetpack-connect"===r)return"/jetpack/connect";if((0,l.jf)(s)||(0,l.kD)(s)){let e=new URLSearchParams({oauth2_client_id:s.id,oauth2_redirect:d});return`/start/wpcc?${e.toString()}`}if((0,l.rZ)(s)){let t=(0,n.A)(e,"gravatar_from","signup");return(0,p.iD)({locale:o,twoFactorAuthType:"link",oauth2ClientId:s.id,redirectTo:d,gravatarFrom:(0,l.Dr)(s)&&t,gravatarFlow:(0,l.r7)(s)})}if((0,l.k4)(s)){let e=new URLSearchParams({oauth2_client_id:s.id,oauth2_redirect:d});return`/start/crowdsignal?${e.toString()}`}if(s&&(0,l.GA)(s)){let t=new URLSearchParams({oauth2_client_id:s.id,oauth2_redirect:d}),o=(0,n.A)(e,"wccom-from");return o&&t.set("wccom-from",o),`/start/wpcc?${t.toString()}`}if(s){let e=new URLSearchParams({oauth2_client_id:s.id,oauth2_redirect:d});return`/start/wpcc?${e.toString()}`}let u=(0,n.A)(e,"signup_flow");if(u){if(d){let e=new URLSearchParams({redirect_to:d});return`/start/${u}?${e.toString()}`}return`/start/${u}`}if(d){let e=new URLSearchParams({redirect_to:d});return`/start/account?${e.toString()}`}return(0,i.EZ)(o)?"/start":(0,i._e)("/start",o)}let h=(e,t)=>!(!o.Ay.isEnabled("login/magic-login")||e||(0,l.uf)(t)),g=({locale:e="en",currentRoute:t,signupUrl:s,oauth2ClientId:o,...i})=>{let r={locale:e,twoFactorAuthType:"link",signupUrl:s,oauth2ClientId:o,...i};return"/log-in/jetpack"===t&&(r.twoFactorAuthType="jetpack/link"),(0,p.iD)(r)},_=(e,t,s=(0,r.yb)())=>{let o={"jetpack-ai":t("Jetpack"),"woocommerce-payments":t("WooPayments")},i=Array.from(new Set(e.split(",").map(e=>o[e.trim()]))).filter(e=>e),n=new Intl.ListFormat(s,{style:"long",type:"conjunction"});return i.length?n.format(i):""},w=(e,t,s=(0,r.yb)())=>{let o=t("of the extensions you’ve chosen");if(!e)return o;let i=_(e,t,s);return i?t("in %(pluginNames)s",{args:{pluginNames:i},comment:"pluginNames is a list of WordPress extensions"}):o}},"./lib/tos-acceptance-tracking/index.js":(e,t,s)=>{s.d(t,{A:()=>i});var o=s("./lib/i18n-utils/browser.js");function i(){let e=0,t=0,s="/";return e=window.document.documentElement.clientWidth,t=window.document.documentElement.clientHeight,{path:window.location.pathname,locale:(0,o.y)(),viewport:`${e}x${t}`}}},"./lib/user-agent/index.js":(e,t,s)=>{s.d(t,{A:()=>i});var o=s("../node_modules/express-useragent/index.js");let i=s.n(o)().parse(window.navigator.userAgent)},"./lib/webauthn/index.js":(e,t,s)=>{s.d(t,{B:()=>l,T:()=>p});var o=s("../packages/calypso-config/src/index.ts"),i=s("../node_modules/@github/webauthn-json/dist/cjs/webauthn-json.cjs"),r=s("../packages/i18n-calypso/src/index.ts"),n=s("./lib/wp/browser.js");let a="POST";function c(e,t,s){let i=t||{};return"production"!==(0,o.Ay)("env_id")&&(i.hostname=window.location.hostname),new Promise(function(t,o){let r=function(e,s){if(e)return void o(e);t(s)};a===s?n.A.req.post(e,i,r):n.A.req.get(e,i,r)})}function l(){return function(){try{if(!window)return!1}catch{return!1}return!0}()&&(0,i.supported)()}function p(e=null){return c("/me/two-step/security-key/registration_challenge").then(e=>(0,i.create)({publicKey:e})).then(t=>c("/me/two-step/security-key/registration_validate",{data:JSON.stringify(t),name:e},a)).catch(e=>{switch(e.name){case"InvalidStateError":return Promise.reject({context:"PublicKeyCredential",error:"DuplicateKey",message:(0,r.Tl)("Security key has already been registered.")});case"NotAllowedError":return Promise.reject({context:"PublicKeyCredential",error:"TimeoutCanceled",message:(0,r.Tl)("Security key interaction timed out or canceled.")});case"AbortError":return Promise.reject({context:"PublicKeyCredential",error:"Canceled",message:(0,r.Tl)("Security key interaction canceled.")});default:return Promise.reject({context:"PublicKeyCredential",error:"Unknown",message:(0,r.Tl)("Security key registration error.")})}})}},"./login/wp-login/hooks/get-header-text.tsx":(e,t,s)=>{s.d(t,{n:()=>a});var o=s("../packages/i18n-calypso/src/index.ts"),i=s("../node_modules/lodash-es/capitalize.js"),r=s("./lib/oauth2-clients.js"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a({isSocialFirst:e,twoFactorAuthType:t,isManualRenewalImmediateLoginAttempt:s,socialConnect:a,linkingSocialService:c,action:l,oauth2Client:p,isWooJPC:d,isJetpack:u,isWCCOM:m,isFromAkismet:h,isFromAutomatticForAgenciesPlugin:g,isGravPoweredClient:_,currentQuery:w,translate:k,twoStepNonce:A}){let y=k("Log in to your account");if(e){let e=p?.name;h?e="Akismet":(0,r.kY)(p)?e="Blaze Pro":(0,r.V5)(p)?e="Automattic for Agencies":(0,r.uf)(p)?e="Jetpack Cloud":u?e="Jetpack":m?e="Woo":(0,r.mo)(p)&&(e="VIP"),d&&(e="Woo"),y=e?(0,o.Qq)({text:"Log in to {{span}}%(client)s{{/span}} with WordPress.com",newCopy:k("Log in to {{span}}%(client)s{{/span}} with WordPress.com",{args:{client:e},components:{span:(0,n.Y)("span",{className:"wp-login__one-login-header-client-name"})}}),oldCopy:k("Log in to WordPress.com")}):k("Log in to WordPress.com")}return"authenticator"===t&&(y=k("Continue with an authentication code")),"push"===t?y=k("Continue with the Jetpack app"):"backup"===t&&(y=k("Continue with a backup code")),s&&(y=k("Log in to update your payment details and renew your subscription")),A&&(y=k("Two-Step Authentication")),a&&(y=k("Connect your %(service)s account",{args:{service:(0,i.A)(c)}})),"lostpassword"===l?y=k("Lost your password?"):w?.lostpassword_flow==="true"?y=k("You've got mail"):p&&((0,r.Tg)(p)&&(y=document.location.search?.includes("wpcloud")?k("Log in to WP Cloud with WordPress.com"):k("Howdy! Log into the Automattic Partner Portal with your WordPress.com account.")),_&&(y=k("Login to %(clientTitle)s",{args:{clientTitle:p.title}}))),g&&(y=k("Log in to Automattic for Agencies")),y}},"./state/auth/actions.js":(e,t,s)=>{s.d(t,{Y:()=>h});var o=s("../packages/i18n-utils/src/utils.ts"),i=s("./lib/i18n-utils/browser.js"),r=s("./state/action-types.ts"),n=s("../packages/calypso-config/src/index.ts"),a=s("../packages/i18n-calypso/src/index.ts"),c=s("./lib/tos-acceptance-tracking/index.js"),l=s("./state/analytics/actions/record-with-client-id.js"),p=s("./state/data-layer/handler-registry.js"),d=s("./state/data-layer/wpcom-http/actions.js"),u=s("./state/data-layer/wpcom-http/utils.js"),m=s("./state/notices/actions.ts");(0,p.vZ)("state/data-layer/wpcom/auth/send-login-email/index.js",{[r.eSr]:[(0,u.wH)({fetch:e=>{let{email:t,lang_id:s,locale:o,redirect_to:i,blog_id:p,showGlobalNotices:u,loginFormFlow:h,requestLoginEmailFormFlow:g,isMobileAppLogin:_,flow:w,createAccount:k,source:A,tokenType:y}=e,f=u?(0,m.Ns)((0,a.Tl)("Sending email"),{duration:4e3}):null;return[...u?[f]:[],...h||g?[{type:r.aNI}]:[],...g?[(0,l.K)("calypso_login_email_link_submit",{token_type:y,flow:w})]:[],...h?[(0,l.K)("calypso_login_block_login_form_send_magic_link",{token_type:y,flow:w})]:[],...k?[(0,l.K)("calypso_login_block_login_form_send_account_create_magic_link",{token_type:y,flow:w})]:[],(0,d.L)({path:"/auth/send-login-email",apiVersion:"1.3",method:"POST",body:{client_id:(0,n.Ay)("wpcom_signup_id"),client_secret:(0,n.Ay)("wpcom_signup_key"),..._&&{infer:!0},..._&&{scheme:"wordpress"},locale:o,lang_id:s,email:t,...i&&{redirect_to:i},...p&&{blog_id:p},...w&&{flow:w},create_account:k,tos:(0,c.A)(),...y&&{token_type:y},source:A,calypso_env:window?.location?.host==="wordpress.com"?"production":(0,n.Ay)("env_id")}},{...e,infoNoticeId:f?f.notice.noticeId:null})]},onSuccess:({email:e,showGlobalNotices:t,infoNoticeId:s=null,loginFormFlow:o,requestLoginEmailFormFlow:i,tokenType:n,flow:c},p)=>[...o||i?[{type:r.X5O,response:p},{type:r.sfX,email:e}]:[],...i?[(0,l.K)("calypso_login_email_link_success",{token_type:n,flow:c})]:[],...o?[(0,l.K)("calypso_login_block_login_form_send_magic_link_success",{token_type:n,flow:c})]:[],...t?[(0,m.fj)(s),(0,m.Er)((0,a.Tl)("Email Sent. Check your mail app!"),{duration:4e3})]:[]],onError:({showGlobalNotices:e,infoNoticeId:t=null,loginFormFlow:s,requestLoginEmailFormFlow:o,tokenType:i,flow:n},c)=>[...s||o?[{type:r.WM$,error:{code:c.error,message:c.message}}]:[],...o?[(0,l.K)("calypso_login_email_link_failure",{error_code:c.error,error_message:c.message,token_type:i,flow:n})]:[],...s?[(0,l.K)("calypso_login_block_login_form_send_magic_link_failure",{error_code:c.error,error_message:c.message,token_type:i,flow:n})]:[],...e?[(0,m.fj)(t),(0,m.tg)((0,a.Tl)("Sorry, we couldn’t send the email."),{duration:4e3})]:[]]})]});let h=(e,{redirectTo:t,blogId:s,showGlobalNotices:n=!1,loginFormFlow:a=!1,requestLoginEmailFormFlow:c=!1,isMobileAppLogin:l=!1,flow:p=null,createAccount:d=!1,tokenType:u="link",source:m=""})=>{let h=(0,i.y)(),g=(0,o.Z0)(h).value;return{type:r.eSr,email:e,locale:h,lang_id:g,redirect_to:t,blog_id:s,isMobileAppLogin:l,showGlobalNotices:n,loginFormFlow:a,requestLoginEmailFormFlow:c,flow:p,createAccount:d,tokenType:u,source:m}}},"./state/login/actions/auth-account-type.js":(e,t,s)=>{s.d(t,{K:()=>u,h:()=>m});var o=s("../packages/i18n-calypso/src/index.ts"),i=s("../node_modules/lodash-es/defer.js"),r=s("./state/action-types.ts"),n=s("./state/analytics/actions/record-with-client-id.js"),a=s("../node_modules/lodash-es/get.js"),c=s("./state/data-layer/handler-registry.js"),l=s("./state/data-layer/wpcom-http/actions.js"),p=s("./state/data-layer/wpcom-http/pipeline/retry-on-failure/policies.js");let d=(0,s("./state/data-layer/wpcom-http/utils.js").wH)({fetch:e=>(0,l.L)({path:`/users/${encodeURIComponent(e.usernameOrEmail)}/auth-options`,method:"GET",apiVersion:"1.1",retryPolicy:(0,p.sb)()},e),onSuccess:(e,t)=>{let s=(0,a.A)(t,"passwordless");return[{type:r.iQ$,data:{type:s?"passwordless":"regular"}},(0,n.K)("calypso_login_block_login_form_get_auth_type_success")]},onError:(e,{error:t,message:s})=>[{type:r.RQo,error:{code:t,message:s,field:"usernameOrEmail"}},(0,n.K)("calypso_login_block_login_form_get_auth_type_failure",{error_code:t,error_message:s})]});(0,c.vZ)("state/data-layer/wpcom/users/auth-options/index.js",{[r.sZE]:[d]}),s("./state/login/init.js");let u=e=>t=>{if(t((0,n.K)("calypso_login_block_login_form_get_auth_type")),t({type:r.o5V,usernameOrEmail:e}),""===e){let e={code:"empty_username",message:(0,o.Tl)("Please enter a username or email address."),field:"usernameOrEmail"};t((0,n.K)("calypso_login_block_login_form_get_auth_type_failure",{error_code:e.code,error_message:e.message})),(0,i.A)(()=>{t({type:r.RQo,error:e})});return}t({type:r.sZE,usernameOrEmail:e})},m=()=>({type:r.cwo})},"./state/login/actions/form-update.js":(e,t,s)=>{s.d(t,{O:()=>i});var o=s("./state/action-types.ts");s("./state/login/init.js");let i=()=>({type:o.LCX})},"./state/login/actions/login-social-user.js":(e,t,s)=>{s.d(t,{M:()=>p});var o=s("../packages/calypso-analytics/src/index.ts"),i=s("../packages/calypso-config/src/index.ts"),r=s("../node_modules/lodash-es/get.js"),n=s("./lib/tos-acceptance-tracking/index.js"),a=s("./state/action-types.ts"),c=s("./state/login/actions/remote-login-user.js"),l=s("./state/login/utils.js");s("./state/login/init.js");let p=(e,t)=>s=>(s({type:a.KPf}),(0,l.Pb)("social-login-endpoint",{...e,redirect_to:t,client_id:(0,i.Ay)("wpcom_signup_id"),client_secret:(0,i.Ay)("wpcom_signup_key"),tos:JSON.stringify((0,n.A)()),anon_id:(0,o._T)()}).then(e=>("sms"===(0,r.A)(e,"body.data.two_step_notification_sent")&&s({type:a.xFm,notice:{message:(0,l.qS)(e),status:"is-success"},twoStepNonce:(0,r.A)(e,"body.data.two_step_nonce_sms")}),(0,c.n)((0,r.A)(e,"body.data.token_links",[])).then(()=>{s({type:a.gEO,data:(0,r.A)(e,"body.data")})}))).catch(t=>{let o=(0,l.ht)(t);return o.email=(0,r.A)(t,"response.body.data.email"),s({type:a.$Uk,error:o,authInfo:e,data:(0,r.A)(t,"response.body.data")}),Promise.reject(o)}))},"./state/login/actions/reboot-after-login.ts":(e,t,s)=>{s.d(t,{x:()=>n});var o=s("./lib/user/store.js"),i=s("./state/analytics/actions/record-with-client-id.js"),r=s("./state/login/selectors.js");let n=e=>async(t,s)=>{t((0,i.K)("calypso_login_success",{two_factor_enabled:(0,r.DO)(s()),...e}));let n=(0,r.Lc)(s())||"/";if((0,o.iT)()&&await (0,o.bC)(),n.startsWith("https://web.archive.org/web/20250820114040/https://public-api.wordpress.com/oauth2/authorize")){let e=new URL(n);e.searchParams.append("login_flow","true"),window.location.href=e.toString();return}window.location.href=n}},"./state/login/actions/remote-login-user.js":(e,t,s)=>{s.d(t,{n:()=>r});let o=e=>new Promise((t,s)=>{setTimeout(()=>s(Error(`timeout of ${e} reached`)),e)}),i=(e,t=25e3)=>{let s,i=new Promise(t=>{(s=document.createElement("iframe")).style.display="none",s.setAttribute("scrolling","no"),s.onload=t,s.src=e,document.body.appendChild(s)}),r=()=>{s.parentElement.removeChild(s)};return Promise.race([i,o(t)]).then(r,r)},r=e=>Promise.all(e.map(e=>i(e)).map(e=>e.catch(()=>{})))},"./state/logout/actions.js":(e,t,s)=>{s.d(t,{y:()=>a});var o=s("../packages/calypso-config/src/index.ts"),i=s("../node_modules/lodash-es/get.js"),r=s("./state/current-user/selectors.js"),n=s("./state/login/utils.js");let a=e=>(t,s)=>{let a=((0,r.HW)(s()).logout_URL||"").match(/_wpnonce=([^&]*)/),c=a&&a[1];return(0,n.Pb)("logout-endpoint",{redirect_to:e,client_id:(0,o.Ay)("wpcom_signup_id"),client_secret:(0,o.Ay)("wpcom_signup_key"),logout_nonce:c}).then(e=>(0,i.A)(e,"body.data",{})).catch(e=>Promise.reject((0,n.ht)(e)))}},"./state/selectors/get-partner-id-from-query.js":(e,t,s)=>{s.d(t,{A:()=>i});var o=s("./state/selectors/get-current-query-arguments.js");let i=function(e){let t=(0,o.A)(e),s=Number(t?.partner_id);return Number.isInteger(s)?s:null}},"./state/selectors/get-partner-slug-from-query.js":(e,t,s)=>{s.d(t,{A:()=>i});var o=s("./state/selectors/get-partner-id-from-query.js");let i=function(e){switch((0,o.A)(e)){case 51945:case 51946:case 51652:return"dreamhost";case 49615:case 49640:return"pressable";case 57152:case 57733:return"milesweb";case 58712:case 58713:return"bluehost";case 57039:return"a2hosting";case 57304:case 57306:return"exabytes";case 57836:return"inmotion";case 57916:case 57917:return"quickclick";case 57900:case 57901:return"whogohost";case 57264:return"wppronto";case 57752:case 57753:return"wpwebhost";case 60178:case 60179:return"liquidweb";case 65773:case 65774:return"eurodns";default:return null}}},"./state/selectors/is-fetching-magic-login-email.js":(e,t,s)=>{s.d(t,{A:()=>i});var o=s("../node_modules/lodash-es/get.js");function i(e){return(0,o.A)(e,"login.magicLogin.isFetchingEmail",!1)}s("./state/login/init.js")},"./state/selectors/is-magic-login-email-requested.js":(e,t,s)=>{s.d(t,{A:()=>i});var o=s("../node_modules/lodash-es/get.js");function i(e){return(0,o.A)(e,"login.magicLogin.requestEmailSuccess",!1)}s("./state/login/init.js")}}]);

}
/*
     FILE ARCHIVED ON 11:40:40 Aug 20, 2025 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 03:31:10 Aug 21, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.56
  exclusion.robots: 0.025
  exclusion.robots.policy: 0.015
  esindex: 0.011
  cdx.remote: 7.463
  LoadShardBlock: 329.055 (3)
  PetaboxLoader3.datanode: 85.639 (4)
  PetaboxLoader3.resolve: 303.498 (2)
  load_resource: 227.009
*/